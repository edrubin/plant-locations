# readme

This repository provides the replication code and data for the paper [*Downwind and out: The strategic dispersion of power plants and their pollution*](https://edrub.in/Papers/draft-plant-locations.pdf) in [JAERE](https://www.journals.uchicago.edu/toc/jaere/current) (the Journal of the Association of Environmental and Resource Economists).

## organization

This repository focuses on four subdirectories:

- `CodeR` code to clean/prep the data and conduct the analyses;
- `DataRaw` pre-cleaning data;
- `DataClean` post-cleaning data used in the analysis;

You will need to create two additional directories for the output.

- `Figures` figures and tables generated by the code;
- `Tables` for a lonely table.

## data

The provided data are separated into two directories: `DataRaw` and `DataClean`. The raw data (`DataRaw`) providing the starting point for the analyses (e.g., Census data, wind data, plant locations). The cleaned data (`DataClean`) are the processed, intermediate, and/or final versions of the project's various datasets.

[`DataRaw/README.md`](DataRaw) describes the sources of the raw datasets and the access/download dates. The paper provides additional descriptions of each raw dataset.

The one thing that needs to be done is unzipping `set-1.zip` and `set-2.zip` in `DataClean/hysplit-completed/processed` (into the `processed` folder).

## code 

**general** The code all uses [R](https://cran.r-project.org/) (most recently, 4.4.2). You should be able to run the scripts individually and sequentially (ordered alphanumerically), beginning with `000a1-clean-egrid-2018.R` and ending with `006d-map-nonattainment-examples.R`. For of few of the larger figures, we used [QGIS](https://www.qgis.org/) and/or [Adobe InDesign](https://www.adobe.com/products/indesign.html). We can provide those individual files upon request.

**description** The scripts' names describe the order (numeric-alphabetical prefix) and the goal of the script. In general, the scripts fall into several broad groups:

| prefix | tasks |
|:---:|:---|
| `000*.R` | clean and aggregate the eGRID data |
| `001*.R` | calculate distances between plants and borders, water bodies, and border compositions |
| `002*.R` | calculations related to wind, plant locations, and downwind areas |
| `003*.R` | plots histograms |
| `004*.R` | summarizes border-water distribution and distance tests |
| `005*.R` | process, summarize, and plot HYSPLIT trajectories |
| `006*.R` | plot plant births, county shares, stack heights, and nonattainment |

Excluding the HYSPLIT runs, our ballpark guess is that the code would finish within a week. That said, we were able to parallelize with 64 cores.

**operating system** We used R on OSX. If you run into issues—particularly with parallelization—make sure it is not an issue specific to operating-system differences.

**hysplit** The code uses data produced by [HYSPLIT](https://www.ready.noaa.gov/HYSPLIT.php). The raw data from HYSPLIT are included in the `DataRaw/hysplit-completed` directory. Please contact us for the code behind the HYSPLIT runs. If you are interested in HYSPLIT data, you may want to check out some of the work by [Lucas Henneman](https://www.lucashenneman.org/) and coauthors (especially [HyADS](https://www.cmascenter.org/conference//2019/slides/1440_henneman_hyads_tool_2019.pdf)).

## output

Figures and tables are generated by the code and saved in the `Figures` and `Tables` directories. They are also included in the paper. [`output-list.md`](output-list) provides a list of the output files.
